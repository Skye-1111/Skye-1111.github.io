# 激光雷达系统连接指南

## 问题解决总结

### 原始问题
miniPC无法连接到PC服务器，连接失败。

### 根本原因
1. **错误的IP地址**: 原来使用的`172.23.220.178`无法连接
2. **网络配置问题**: 服务器绑定了`0.0.0.0`但某些IP地址不可达

### 解决方案
1. **找到正确的IP地址**: `192.168.167.187`
2. **更新miniPC客户端配置**: 使用正确的服务器地址
3. **验证连接**: 所有测试通过

## 当前配置

### PC服务器 (上位机)
- **HTTP地址**: `http://192.168.167.187:8080`
- **WebSocket地址**: `ws://192.168.167.187:8080/ws`
- **本地地址**: `http://127.0.0.1:8080`

### MiniPC客户端
- **服务器地址**: `ws://192.168.167.187:8080/ws`
- **设备类型**: `minipc`
- **自动重连**: 已启用

## 使用方法

### 1. 启动PC服务器
```bash
node pc-server.js
```

### 2. 启动MiniPC客户端
```bash
node mini-pc-client.js
```

### 3. 访问Web界面
打开浏览器访问: `http://192.168.167.187:8080`

## 网络要求

### 确保网络连通性
1. **同一网络**: PC和miniPC必须在同一局域网
2. **防火墙**: 确保端口8080未被阻止
3. **IP地址**: 使用`192.168.167.187`而不是`172.23.220.178`

### 测试连接
```bash
# 测试HTTP连接
node simple-test.js

# 测试WebSocket连接
node test-minipc-connection.js
```

## 故障排除

### 如果连接仍然失败
1. **检查IP地址**: 运行`ipconfig`确认当前IP
2. **检查端口**: 运行`netstat -an | findstr :8080`
3. **检查防火墙**: 确保Windows防火墙允许端口8080
4. **重启服务**: 停止并重新启动服务器

### 常见错误
- `ECONNREFUSED`: 服务器未运行或端口被占用
- `socket hang up`: 网络连接问题或IP地址错误
- `timeout`: 防火墙阻止连接

## 文件说明

- `pc-server.js`: PC端WebSocket服务器
- `mini-pc-client.js`: MiniPC端客户端
- `network-test.js`: 网络连接测试工具
- `simple-test.js`: 简单连接测试
- `test-minipc-connection.js`: MiniPC连接测试

## 下一步

1. 在miniPC上运行客户端
2. 测试数据采集功能
3. 验证Web界面显示
4. 测试远程控制功能
